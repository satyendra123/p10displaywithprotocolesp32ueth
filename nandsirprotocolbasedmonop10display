#example-1 I AM USING THIS TO KNOW THAT HOW CAN I EXTRACT THE DATA FROM THE PROTOCOL

String data = "|C|1|4|1|28-0-#u#R96|";

void setup() {
  Serial.begin(9600);
  delay(2000); // Allow serial monitor to initialize

  Serial.println("Starting extraction...");
  extractData(data);
  Serial.println("Extraction complete.");
}

void loop() {
  // Nothing to do here
}

void extractData(String data) {
  // Extracting data without mapping
  int startPos = data.indexOf('|') + 1;
  int endPos = data.indexOf('|', startPos);
  String start_byte = data.substring(startPos, endPos);

  startPos = endPos + 1;
  endPos = data.indexOf('|', startPos);
  int ID = data.substring(startPos, endPos).toInt();

  startPos = endPos + 1;
  endPos = data.indexOf('|', startPos);
  int data_type_code = data.substring(startPos, endPos).toInt();
  String data_type = (data_type_code == 4) ? "temporary" : "permanent";

  startPos = endPos + 1;
  endPos = data.indexOf('|', startPos);
  int fakedata = data.substring(startPos, endPos).toInt();

  startPos = endPos + 1;
  endPos = data.indexOf('-', startPos);
  int x_axis = data.substring(startPos, endPos).toInt();

  startPos = endPos + 1;
  endPos = data.indexOf('-', startPos);
  int y_axis = data.substring(startPos, endPos).toInt();

  startPos = endPos + 2; // Skip past '-' and '#'
  endPos = data.indexOf('#', startPos);
  String arrow = data.substring(startPos, endPos);

  startPos = endPos + 1;
  endPos = data.indexOf('|', startPos);
  String colorWithData = data.substring(startPos, endPos);
  String actualColor = colorWithData.substring(0, 1);
  int display_data = colorWithData.substring(1).toInt();

  // Print the extracted data
  Serial.println("Extracted Data:");
  Serial.println("Start Byte: " + start_byte);
  Serial.println("ID: " + String(ID));
  Serial.println("Data Type: " + data_type);
  Serial.println("X Axis: " + String(x_axis));
  Serial.println("Y Axis: " + String(y_axis));
  Serial.println("Arrow: " + arrow);
  Serial.println("Color: " + actualColor);
  Serial.println("Display Data: " + String(display_data));
}


